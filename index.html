import React, { useState, useEffect, useRef } from 'react';
import { Sparkles, Heart, PenTool, ExternalLink, Star, Menu, X } from 'lucide-react';

/**
 * カスタムアイコンコンポーネント
 * Lucideにない特定のデザインやLINEアイコン用
 */
const IconLine = ({ className }) => (
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className={className}>
    <path d="M21.198 9.947c0-4.632-4.996-8.402-11.146-8.402-6.151 0-11.147 3.77-11.147 8.402 0 4.153 3.682 7.636 9.32 8.272.361.077.852.235.976.54.112.274.073.702.036.974-.06.467-.39 1.833-.427 1.992-.066.28-.312 1.096.476 1.096.388 0 3.097-1.832 4.316-3.134 2.946-1.574 5.438-4.323 5.438-7.792h.001c-.001-.645-.064-1.282-.187-1.948z"/>
  </svg>
);

/**
 * スクロール連動アニメーション用フック
 */
const useOnScreen = (options) => {
    const [ref, setRef] = useState(null);
    const [visible, setVisible] = useState(false);

    useEffect(() => {
        const observer = new IntersectionObserver(([entry]) => {
            if (entry.isIntersecting) {
                setVisible(true);
                observer.unobserve(entry.target);
            }
        }, options);

        if (ref) {
            observer.observe(ref);
        }

        return () => {
            if (ref) {
                observer.unobserve(ref);
            }
        };
    }, [ref, options]);

    return [setRef, visible];
};

/**
 * アニメーションセクションコンポーネント
 */
const Section = ({ children, className = "", delay = 0 }) => {
    const [setRef, visible] = useOnScreen({ threshold: 0.1 });
    
    return (
        <div 
            ref={setRef} 
            className={`transition-all duration-1000 transform ${visible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10'} ${className}`}
            style={{ transitionDelay: `${delay}ms` }}
        >
            {children}
        </div>
    );
};

export default function App() {
    // --- コンテンツ設定 ---
    const content = {
        name: "Hanako",
        title: "Lifestyle Stylist",
        heroImage: "https://images.unsplash.com/photo-1515934751635-c81c6bc9a2d8?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80",
        catchCopy: "私らしく、心地よく。",
        subCopy: "日々の暮らしに、小さな彩りを。\n言葉とデザインで、あなたの想いを紡ぎます。",
        
        vision: {
            title: "Values",
            items: [
                { icon: Heart, title: "Be You", desc: "誰かのためではなく、自分のための幸せを大切に。" },
                { icon: Sparkles, title: "Comfort", desc: "無理なく続けられる、心地よいリズムを提案します。" },
                { icon: PenTool, title: "Story", desc: "すべての活動の裏側にある物語を大切に届けます。" },
            ]
        },

        story: {
            title: "My Story",
            intro: "はじめまして、Hanakoです。元々は会社員として事務職をしていましたが、「もっと自分らしく表現したい」という想いから活動を始めました。",
            worksTitle: "Works & History",
            works: [
                "大手メディアでのコラム連載開始（2023.04〜）",
                "SNS総フォロワー数 1.5万人突破",
                "オンラインコミュニティ「Life Design Lab」主催",
                "個人向けライフスタイルコーチング実績 50名以上",
                "企業向けSNS運用代行・コンサルティング"
            ]
        },

        connect: {
            title: "Stay Connected",
            desc: "日々の思考はnoteで、深いやり取りはLINEで。\nお仕事のご依頼もLINE公式アカウントから受け付けています。",
            noteUrl: "https://note.com/",
            lineUrl: "https://line.me/",
        }
    };

    return (
        <div className="font-sans antialiased text-[#4A4A4A] bg-[#FDFBF7] min-h-screen overflow-x-hidden selection:bg-[#FBCFE8] selection:text-[#DB2777]">
            {/* Google Fonts & Custom Styles Injection */}
            <style>{`
                @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;500;700&display=swap');
                
                body {
                    font-family: 'Zen Maru Gothic', sans-serif;
                }

                @keyframes float {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-10px); }
                }
                
                @keyframes blob {
                    0% { transform: translate(0px, 0px) scale(1); }
                    33% { transform: translate(30px, -50px) scale(1.1); }
                    66% { transform: translate(-20px, 20px) scale(0.9); }
                    100% { transform: translate(0px, 0px) scale(1); }
                }
                
                .animate-blob {
                    animation: blob 7s infinite;
                }
                
                .animate-float {
                    animation: float 6s ease-in-out infinite;
                }
            `}</style>

            {/* Background Blobs (Soft Decoration) */}
            <div className="fixed inset-0 pointer-events-none z-0 overflow-hidden">
                <div className="absolute top-0 left-0 w-96 h-96 bg-[#FCE7F3] rounded-full mix-blend-multiply filter blur-3xl opacity-50 animate-blob"></div>
                <div className="absolute top-0 right-0 w-96 h-96 bg-[#EDE9FE] rounded-full mix-blend-multiply filter blur-3xl opacity-50 animate-blob" style={{animationDelay: '2s'}}></div>
                <div className="absolute -bottom-32 left-20 w-72 h-72 bg-yellow-100 rounded-full mix-blend-multiply filter blur-3xl opacity-50 animate-blob" style={{animationDelay: '4s'}}></div>
            </div>

            {/* Main Content Wrapper */}
            <div className="relative z-10">

                {/* Header/Hero Section */}
                <header className="relative w-full min-h-[90vh] flex items-center justify-center px-6 pt-12 pb-20">
                    <div className="max-w-6xl w-full flex flex-col-reverse md:flex-row items-center gap-12 md:gap-24">
                        
                        {/* Text Area */}
                        <Section className="flex-1 text-center md:text-left">
                            <span className="inline-block py-1 px-4 mb-6 rounded-full bg-white border border-[#FBCFE8] text-[#DB2777] text-sm tracking-wider font-medium shadow-sm">
                                {content.title}
                            </span>
                            <h1 className="text-4xl md:text-6xl font-bold leading-tight mb-6 text-gray-800 tracking-wide" style={{ lineHeight: '1.4' }}>
                                {content.catchCopy}
                            </h1>
                            <p className="text-lg md:text-xl text-gray-600 mb-10 whitespace-pre-line leading-loose">
                                {content.subCopy}
                            </p>
                            <div className="flex flex-col sm:flex-row gap-4 justify-center md:justify-start">
                                <a href="#connect" className="px-8 py-4 bg-[#DB2777] text-white rounded-full font-bold shadow-lg shadow-pink-200 hover:bg-pink-600 hover:shadow-xl transition-all transform hover:-translate-y-1 text-center">
                                    お問い合わせ
                                </a>
                                <a href="#story" className="px-8 py-4 bg-white text-[#4A4A4A] border border-[#FBCFE8] rounded-full font-bold shadow-sm hover:bg-[#FCE7F3] transition-all text-center">
                                    もっと知る
                                </a>
                            </div>
                        </Section>

                        {/* Image Area */}
                        <Section delay={200} className="flex-1 relative">
                            <div className="relative w-72 h-72 md:w-[480px] md:h-[580px] mx-auto animate-float">
                                {/* Decorative Frame */}
                                <div className="absolute inset-0 border-2 border-[#FBCFE8] rounded-[3rem] transform rotate-6 translate-x-4 translate-y-4"></div>
                                <div className="absolute inset-0 bg-white rounded-[3rem] overflow-hidden shadow-2xl transform transition-transform hover:scale-[1.01] duration-700">
                                    <img 
                                        src={content.heroImage} 
                                        alt="Portrait" 
                                        className="w-full h-full object-cover opacity-90 hover:opacity-100 transition-opacity duration-700"
                                    />
                                </div>
                                {/* Name Badge */}
                                <div className="absolute -bottom-6 -left-6 bg-white/90 backdrop-blur-md px-8 py-4 rounded-full shadow-lg border border-white">
                                    <p className="text-2xl font-bold text-[#DB2777]">{content.name}</p>
                                </div>
                            </div>
                        </Section>
                    </div>
                </header>

                {/* Vision Section */}
                <section className="py-24 px-6 relative">
                    <div className="max-w-4xl mx-auto">
                        <Section className="text-center mb-16">
                            <h2 className="text-sm font-bold text-[#DB2777] mb-3 tracking-widest uppercase">Vision</h2>
                            <p className="text-3xl md:text-4xl font-bold text-gray-800">大切にしていること</p>
                        </Section>

                        <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
                            {content.vision.items.map((item, index) => (
                                <Section key={index} delay={index * 150} className="bg-white/60 p-8 rounded-3xl border border-white shadow-sm hover:shadow-md transition-all hover:-translate-y-1">
                                    <div className="w-14 h-14 bg-[#FCE7F3] rounded-full flex items-center justify-center text-[#DB2777] mb-6 mx-auto">
                                        <item.icon className="w-7 h-7" />
                                    </div>
                                    <h3 className="text-xl font-bold text-center mb-4 text-gray-700">{item.title}</h3>
                                    <p className="text-gray-600 text-center leading-relaxed text-sm">
                                        {item.desc}
                                    </p>
                                </Section>
                            ))}
                        </div>
                    </div>
                </section>

                {/* Story & Works Section */}
                <section id="story" className="py-24 px-6 relative">
                    {/* Background accent for this section */}
                    <div className="absolute inset-0 bg-white/40 skew-y-3 transform origin-top-left -z-10"></div>
                    
                    <div className="max-w-5xl mx-auto flex flex-col md:flex-row gap-16 items-start">
                        
                        {/* Story Text */}
                        <Section className="flex-1">
                            <h2 className="text-sm font-bold text-[#DB2777] mb-2 tracking-widest uppercase">My Story</h2>
                            <h3 className="text-3xl font-bold text-gray-800 mb-8">これまでの歩み</h3>
                            <div className="prose prose-pink text-gray-600 leading-loose">
                                <p className="mb-6">{content.story.intro}</p>
                                <p>
                                    「誰かの役に立ちたい」という一心で、独学でスキルを磨き、小さな実績を積み重ねてきました。
                                    現在では、ひとりひとりのライフスタイルに寄り添った提案や、想いを形にするお手伝いをさせていただいています。
                                    <br/><br/>
                                    大切にしているのは「対話」です。表面的な悩みだけでなく、その奥にある本当の願いを一緒に見つけ出したいと思っています。
                                </p>
                            </div>
                        </Section>

                        {/* Works List (実績) */}
                        <Section delay={200} className="flex-1 w-full">
                            <div className="bg-white p-8 md:p-10 rounded-3xl shadow-lg border border-[#EDE9FE] relative overflow-hidden group">
                                {/* Decoration */}
                                <div className="absolute top-0 right-0 w-32 h-32 bg-[#EDE9FE] rounded-bl-full opacity-50 group-hover:scale-110 transition-transform duration-500"></div>
                                
                                <h3 className="text-2xl font-bold text-gray-800 mb-8 relative z-10 flex items-center gap-3">
                                    <Star className="text-[#DB2777] w-6 h-6 fill-[#DB2777]" />
                                    {content.story.worksTitle}
                                </h3>
                                
                                <ul className="space-y-6 relative z-10">
                                    {content.story.works.map((work, i) => (
                                        <li key={i} className="flex items-start gap-4">
                                            <span className="flex-shrink-0 w-6 h-6 rounded-full bg-[#FCE7F3] text-[#DB2777] flex items-center justify-center text-xs font-bold mt-1">
                                                {i + 1}
                                            </span>
                                            <span className="text-gray-700 font-medium leading-relaxed border-b border-gray-100 pb-2 w-full">
                                                {work}
                                            </span>
                                        </li>
                                    ))}
                                </ul>
                            </div>
                        </Section>

                    </div>
                </section>

                {/* Connect Section */}
                <section id="connect" className="py-32 px-6">
                    <div className="max-w-4xl mx-auto text-center">
                        <Section>
                            <h2 className="text-4xl md:text-5xl font-bold text-gray-800 mb-6">Stay Connected</h2>
                            <p className="text-gray-600 mb-16 max-w-lg mx-auto whitespace-pre-line leading-loose">
                                {content.connect.desc}
                            </p>
                        </Section>

                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-3xl mx-auto">
                            {/* Note Card */}
                            <Section delay={100} className="group h-full">
                                <a href={content.connect.noteUrl} target="_blank" rel="noopener noreferrer" 
                                   className="block bg-white p-8 rounded-3xl shadow-md hover:shadow-xl border border-gray-100 transition-all duration-300 transform group-hover:-translate-y-2 h-full">
                                    <div className="w-16 h-16 mx-auto bg-[#41C9B4]/10 rounded-2xl flex items-center justify-center text-[#41C9B4] mb-6">
                                        <PenTool className="w-8 h-8" />
                                    </div>
                                    <h3 className="text-xl font-bold text-gray-800 mb-2">note を読む</h3>
                                    <p className="text-gray-500 text-sm mb-6">日々の気づきやエッセイを更新中</p>
                                    <span className="inline-flex items-center text-[#41C9B4] font-bold text-sm">
                                        View Page <ExternalLink className="w-4 h-4 ml-1" />
                                    </span>
                                </a>
                            </Section>

                            {/* LINE Card */}
                            <Section delay={200} className="group h-full">
                                <a href={content.connect.lineUrl} target="_blank" rel="noopener noreferrer" 
                                   className="block bg-white p-8 rounded-3xl shadow-md hover:shadow-xl border border-gray-100 transition-all duration-300 transform group-hover:-translate-y-2 h-full">
                                    <div className="w-16 h-16 mx-auto bg-[#06C755]/10 rounded-2xl flex items-center justify-center text-[#06C755] mb-6">
                                        <IconLine className="w-8 h-8" />
                                    </div>
                                    <h3 className="text-xl font-bold text-gray-800 mb-2">公式LINE</h3>
                                    <p className="text-gray-500 text-sm mb-6">お仕事のご依頼や限定情報はこちら</p>
                                    <span className="inline-flex items-center text-[#06C755] font-bold text-sm">
                                        Add Friend <ExternalLink className="w-4 h-4 ml-1" />
                                    </span>
                                </a>
                            </Section>
                        </div>
                    </div>
                </section>

                {/* Footer */}
                <footer className="py-12 bg-white/60 backdrop-blur border-t border-gray-100 text-center">
                    <div className="max-w-4xl mx-auto px-6">
                        <p className="text-2xl font-bold text-[#DB2777] mb-4">{content.name}</p>
                        <div className="flex justify-center gap-6 mb-8 text-gray-400">
                            <a href="#" className="hover:text-[#DB2777] transition-colors">Twitter</a>
                            <a href="#" className="hover:text-[#DB2777] transition-colors">Instagram</a>
                            <a href="#" className="hover:text-[#DB2777] transition-colors">Facebook</a>
                        </div>
                        <p className="text-xs text-gray-400">
                            &copy; {new Date().getFullYear()} {content.name} Profile. All Rights Reserved.
                        </p>
                    </div>
                </footer>
            </div>
        </div>
    );
}
